#!/bin/bash

# Gives an overview of commits grouped by author since last Sunday.

start_date=$(date -v -sun +"%Y-%m-%d")

IFS=$'\r\n'
log=$(git log --pretty="format:%an|%s" --all --since="$start_date" | grep -v "Merge branch" | sort)

previous_name=""
for i in $log; do
  name=$(echo $i | cut -d'|' -f1)
  text=$(echo $i | cut -d'|' -f2)
  if [ "$name" != "$previous_name" ]
  then
    echo
    echo $name
    previous_name=$name
  fi
  echo $text
done
